
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>JavaScript Test</title>

    <script type="text/javascript">
    	// 갤러리 열기
        function onOpenGallery() {
        	var fileIds = [];
            for (var i = saveImages.length - 1; i >= 0; i--) {
                fileIds.append(saveImages[i].id);
             } 

        	var parameters = {
        		'func' : 'onOpenGallery',
        		'useCamera' : 'PV',
                'galleryType' : 'PV',
        		'usePhotoEdit' : 'N',
        		'editType' : 'R',
        		'fileIds' : fileIds,
        		'maxCount' : '5',
        		'previewWidth' : '200',
        		'previewHeight' : '300',
        		'callback' : 'appPreviewImage',
        		'callbackDelete' : 'appDeletePreviewImage'
        	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onOpenGallery(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
        }

        // 미리보기 썸네일 삭제
        function onDeleteImage(fileId) {
        	var parameters = {
        		'func' : 'onDeleteImage',
        		'fileId' : 'testFileId'
        	};

        	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onDeleteImage(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
        }

        // 새로운 페이지 열기
        function onNewPage(type, url) {
        	var parameters = {
        		'func' : 'onNewPage',
        		'type' : 'TV',
        		'url' : 'http://dev.aboutpet.co.kr/tv/series/indexTvDetail?vdId=N2021012100032&sortCd=&listGb=HOME'
        	};

        	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onNewPage(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
        }

        // PIP 전환
	    function onShowPIP() {
	    	var parameters = {
	    		'func' : 'onShowPIP',
	    		'callback' : 'appPIPClose',
	    		'width' : '',
	    		'height' : ''
	    	};

        	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onShowPIP(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
	    }

	    // 메인 페이지 셋팅
	    function onMainPage() {
			var parameters = {
				'func' : 'onMainPage',
        		'type' : 'TV'
        	};

        	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onMainPage(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
	    }

	    // 현재 위치 정보 요청
	    function onCurrentLoc() {
	    	var parameters = {
	    		'func' : 'onCurrentLoc',
	    		'callback' : 'appCurrentLoc'
	    	};
	    	
        	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onCurrentLoc(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
	    }

	    // 네트워크 상태 정보
	    function onNetworkStatus() {
	    	var parameters = {
	    		'func' : 'onNetworkStatus',
	    		'callback' : 'appNetworkStatus'
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onNetworkStatus(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
	    }

	    // 설정 정보 요청
	    function onSettingInfos() {
	    	var parameters = {
	    		'func' : 'onSettingInfos',
	    		'callback' : 'appSettingInfo'
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onSettingInfos(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
	    }

	    // 공유
	    function onShare(content) {
	    	var parameters = {
	    		'func' : 'onShare',
	    		'image' : '',
	    		'subject' : '',
	    		'link' : ''
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onShare(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
	    }

	    // 파일 업로드
	    function onFileUpload() {
	    	var parameters = {
	    		'func' : 'onFileUpload',
	    		'callback' : 'appUploadComplete'
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onFileUpload(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
	    }

	    // 화면 닫기
	    function onClose() {
	    	var parameters = {
	    		'func' : 'onClose'
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onClose();
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
	    }

	    // Push Token
	    function onPushToken() {
	    	var parameters = {
	    		'func' : 'onPushToken',
	    		'callback' : 'appPushToken'
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onPushToken(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}	
	    }

	    // 네트워크 상태에 따라 자동 플레이 여부
	    function onAutoPlay() {
	    	var parameters = {
	    		'func' : 'onAutoPlay',
	    		'type' : 'W'
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onPushToken(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}		
	    }

		// 자동 플레이 재생가능 여부
	    function onIsAutoPlay() {
	    	var parameters = {
	    		'func' : 'onIsAutoPlay',
	    		'callback' : 'appIsAutoPlay'
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onPushToken(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}	
	    }

	    // 로그인
	    function onLogin() {
			var parameters = {
	    		'func' : 'onLogin'
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onPushToken(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}	
	    }

	    // 로그아웃
	    function onLogout() {
	    	var parameters = {
	    		'func' : 'onLogout'
	    	};

			if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onPushToken(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}	
	    }

		// 미리보기 이미지
		var saveImages = [];
	    function appPreviewImage(jsonString) {
	    	var parseData = JSON.parse(jsonString);
	    	saveImages.push({id: parseData.fileId, name: parseData.imageToBase64});
	    	// alert("fileId : " + parseData.fileId + "mediaType : " + parseData.mediaType +  "  imageToBase64 : image!!")
	    }

	    // 미리보기 이미지 삭제
	    function appDeletePreviewImage(jsonString) {
	    	var parseData = JSON.parse(jsonString);
	    	for (var i = saveImages.length - 1; i >= 0; i--) {
			 	if (fileId == saveImages[i].id) {
			 		saveImages.removeChild(i);
			 		break;
			 	}
			 } 
	    	alert("fileId : " + parseData.fileId)
	    }

	    // 파일 업로드 완료 
	    function appUploadComplete(jsonString) {
			var parseData = JSON.parse(jsonString);
	    	alert("fileIds : " + parseData.fileIds)
	    }

	    // 현재 위치 좌표
	    function appCurrentLoc(jsonString) {
	    	var parseData = JSON.parse(jsonString);
	    	// latitude, longitude
	    	alert("latitude : " + parseData.latitude + "  longitude : " + parseData.longitude + "  authYn : " + parseData.authYn)
	    }

	    // 네트워크 상태 
	    function appNetworkStatus(jsonString) {
	    	var parseData = JSON.parse(jsonString);
	    	// status
			alert("status : " + parseData.status)
	    }

	    // 설정 정보
	    function appSettingInfo(jsonString) {
	    	var parseData = JSON.parse(jsonString);
	    	// mainPage, autoPlay, appVersion
	    	alert("mainPage : " + parseData.mainPage + "  autoPlay : " + parseData.autoPlay + "  appVersion : " + parseData.appVersion);
	    }

	    // 푸시 토큰 전달
	    function appPushToken(jsonString) {
	    	var parseData = JSON.parse(jsonString);
	    	alert("pushToken : " + parseData.token);	
	    }

		// PIP 화면 닫기
	    function appPIPClose() {
	    	alert("PIP Close");
	    }

	    function appIsAutoPlay(jsonString) {
	    	var parseData = JSON.parse(jsonString);
	    	alert("isAutoPlay : " + parseData.isAutoPlay);	
	    }

		//******************** AdBrix ****************************************************/
	    //******************** AdBrix ****************************************************/
		//******************** AdBrix ****************************************************/
		//******************** AdBrix ****************************************************/
		// 회원가입
		function onUserRegister() {
			var parameters = {
	    		'func' : 'onUserRegister',
	    		'SignUpChnnel' : 1,
	    		'eventAttrs' : {
	    			'gender' : "male",
	    			'height' : 36,
	    			'married' : true,
	    			'key' : 'value'
	    		}
	    	};

	    	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onUserRegister(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
		}

		// 상품보기
		function onProductView() {
			var parameters = {
	    		'func' : 'onProductView',
	    		'productModels' : {
	    			'productId' : '5385487400',
	    			'productName' : '슬랙스 10종 특가',
	    			'price' : 10000.0,
	    			'quantity' : 1,
	    			'discount' : 1000.0,
	    			'currency' : 1,		// 상단 주석 또는 문서 참고
	    			'categorys' : [
	    				'카테고리 1', '카테고리 2', '카테고리 3'
	    			],
	    			'productDetailAttrs' : {
	    				'size' : 25,
	    				'color' : 'blue',
	    				'vip' : false
	    			}
	    		},
	    		'eventAttrs' : {
	    			'gender' : "male",
	    			'height' : 36,
	    			'married' : true
	    		}
	    	};

	    	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onProductView(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
		}

		// 상품검색
		function onSearch() {
			var parameters = {
	    		'func' : 'onSearch',
	    		'keyword' : '캐주얼 바지',
	    		'productModels' : [
	    		{
	    			'productId' : '5385487400',
	    			'productName' : '슬랙스 10종 특가',
	    			'price' : 10000.0,
	    			'quantity' : 1,
	    			'discount' : 1000.0,
	    			'currency' : 1,		// 상단 주석 또는 문서 참고
	    			'categorys' : [
	    				'카테고리 1', '카테고리 2', '카테고리 3'
	    			],
	    			'productDetailAttrs' : {
	    				'size' : 25,
	    				'color' : 'blue',
	    				'vip' : false
	    			}
	    		},
	    		{
	    			'productId' : '145099811',
	    			'productName' : '[이월특가] 나염 맨투맨',
	    			'price' : 15500.0,
	    			'quantity' : 1,
	    			'discount' : 1200.0,
	    			'currency' : 1,		// 상단 주석 또는 문서 참고
	    			'categorys' : [
	    				'카테고리 12', '카테고리 22', '카테고리 32'
	    			],
	    			'productDetailAttrs' : {
	    				'grade' : 'vip',
	    				'howmany_buy' : 36,
	    				'discount' : true
	    			}
	    		},
	    		],
	    		'eventAttrs' : {
	    			'gender' : "male",
	    			'height' : 36,
	    			'married' : true
	    		}
	    	};

	    	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onSearch(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
		}

		// 장바구니 담기
		function onAddToCart() {
			var parameters = {
	    		'func' : 'onAddToCart',
	    		'productModels' : [
	    		{
	    			'productId' : '5385487400',
	    			'productName' : '슬랙스 10종 특가',
	    			'price' : 10000.0,
	    			'quantity' : 1,
	    			'discount' : 1000.0,
	    			'currency' : 1,		// 상단 주석 또는 문서 참고
	    			'categorys' : [
	    				'카테고리 1', '카테고리 2', '카테고리 3'
	    			],
	    			'productDetailAttrs' : {
	    				'size' : 25,
	    				'color' : 'blue',
	    				'vip' : false
	    			}
	    		},
	    		{
	    			'productId' : '145099811',
	    			'productName' : '[이월특가] 나염 맨투맨',
	    			'price' : 15500.0,
	    			'quantity' : 1,
	    			'discount' : 1200.0,
	    			'currency' : 1,		// 상단 주석 또는 문서 참고
	    			'categorys' : [
	    				'카테고리 12', '카테고리 22', '카테고리 32'
	    			],
	    			'productDetailAttrs' : {
	    				'grade' : 'vip',
	    				'howmany_buy' : 36,
	    				'discount' : true
	    			}
	    		}
	    		],
	    		'eventAttrs' : {
	    			'gender' : "male",
	    			'height' : 36,
	    			'married' : true
	    		}
	    	};

	    	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onAddToCart(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
		}

		// 최초 결제완료
		function onFirstPurchase() {
			var parameters = {
	    		'func' : 'onFirstPurchase',
	    		'eventAttrs' : {
	    			'attr1' : "최초 결제"
	    		}
	    	};

	    	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onFirstPurchase(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
		}

		// 결제완료
		function onPurchase() {
			var parameters = {
	    		'func' : 'onPurchase',
	    		'orderId' : '290192012',
	    		'orderSales' : 70000.0,
	    		'discount' : 22500.0,
	    		'deliveryCharge' : 1000.0,
	    		'paymentMethod' : 1,
	    		'productModels' : [
	    		{
	    			'productId' : '5385487400',
	    			'productName' : '슬랙스 10종 특가',
	    			'price' : 10000.0,
	    			'quantity' : 1,
	    			'discount' : 1000.0,
	    			'currency' : 1,		// 상단 주석 또는 문서 참고
	    			'categorys' : [
	    				'카테고리 1', '카테고리 2', '카테고리 3'
	    			],
	    			'productDetailAttrs' : {
	    				'size' : 25,
	    				'color' : 'blue',
	    				'vip' : false
	    			}
	    		},
	    		{
	    			'productId' : '145099811',
	    			'productName' : '[이월특가] 나염 맨투맨',
	    			'price' : 15500.0,
	    			'quantity' : 1,
	    			'discount' : 1200.0,
	    			'currency' : 1,		// 상단 주석 또는 문서 참고
	    			'categorys' : [
	    				'카테고리 12', '카테고리 22', '카테고리 32'
	    			],
	    			'productDetailAttrs' : {
	    				'grade' : 'vip',
	    				'howmany_buy' : 36,
	    				'discount' : true
	    			}
	    		},
	    		],
	    		'eventAttrs' : {
	    			'gender' : "male",
	    			'height' : 36,
	    			'married' : true
	    		}
	    	};

	    	if(navigator.userAgent.indexOf('Android') > -1){
				window.AppJSInterface.onPurchase(JSON.stringify(parameters));
			} else {
	            window.webkit.messageHandlers.AppJSInterface.postMessage(parameters);
			}
		}

		function loadlink() { 
			// if (typeof (window.open) == "function") { 
				window.open("http://www.stackoverflow.com"); 
			// } else { 
			// 	window.location.href = "http://www.stackoverflow.com"; 
			// } 
		}

    </script>
</head>
<body>
	<H1>WebToApp</H1>
    <button style="font-size:20px;height:50px;width:100%" onclick='onOpenGallery();'>onOpenGallery()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onDeleteImage();' style='margin-top: 10px'>onDeleteImage()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onNewPage();' style='margin-top: 10px'>onNewPage()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onShowPIP();' style='margin-top: 10px'>onShowPIP()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onMainPage();' style='margin-top: 10px'>onMainPage()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onCurrentLoc();' style='margin-top: 10px'>onCurrentLoc()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onNetworkStatus();' style='margin-top: 10px'>onNetworkStatus()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onSettingInfos();' style='margin-top: 10px'>onSettingInfos()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onShare();' style='margin-top: 10px'>onShare()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onFileUpload();' style='margin-top: 10px'>onFileUpload()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onClose();' style='margin-top: 10px'>onClose()</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onPushToken();' style='margin-top: 10px'>onPushToken()</button><br><br>
    
    <button style="font-size:20px;height:50px;width:100%" onclick='onAutoPlay();' style='margin-top: 10px'>onAutoPlay()</button><br><br>
	<button style="font-size:20px;height:50px;width:100%" onclick='onIsAutoPlay();' style='margin-top: 10px'>onIsAutoPlay()</button><br><br>
	<button style="font-size:20px;height:50px;width:100%" onclick='onLogin();' style='margin-top: 10px'>onLogin()</button><br><br>
	<button style="font-size:20px;height:50px;width:100%" onclick='onLogout();' style='margin-top: 10px'>onLogout()</button><br><br>

    <H1>AdBrix</H1>
    <button style="font-size:20px;height:50px;width:100%" onclick='onUserRegister();' style='margin-top: 10px'>회원가입[ onUserRegister() ]</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onProductView();' style='margin-top: 10px'>상품보기[ onProductView() ]</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onSearch();' style='margin-top: 10px'>상품검색[ onSearch() ]</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onAddToCart();' style='margin-top: 10px'>장바구니담기[ onAddToCart() ]</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onFirstPurchase();' style='margin-top: 10px'>최초 결제완료[ onFirstPurchase() ]</button><br><br>
    <button style="font-size:20px;height:50px;width:100%" onclick='onPurchase();' style='margin-top: 10px'>결제완료[ onPurchase() ]</button><br><br>

    <button style="font-size:20px;height:50px;width:100%" onclick='loadlink();' style='margin-top: 10px'>결제완료[ windowOpen() ]</button><br><br>
</body>
</html>
